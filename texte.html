<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="livros.js"></script>
    <title>Biblioteca Domínio Público</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
        }
        .preview {
            width: 200px;
            height: 300px;
            margin: 20px auto;
            background-size: cover;
            background-position: center;
            display: none;
            border-radius: 10px;
        }
        .mostrar {
            display: block;
        }
        .prateleira {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            background: #8B4513;
            border-radius: 10px;
            margin: 20px auto;
            width: 80%;
        }
        .livro {
            width: 50px;
            height: 150px;
            background-size: cover;
            border-radius: 5px;
        }
        @keyframes destaque {
            0%, 100% { border: 4px solid red; }
            50% { border: 4px solid yellow; }
        }
        .destaque {
            animation: destaque 1s infinite alternate;
        }
        #linkLivro {
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Biblioteca Domínio Público</h1>
    <div id="preview" class="preview"></div>
    <a id="linkLivro" href="#" target="_blank">Acesse o livro</a>
    <div class="prateleira">
        <div id="livro1" class="livro ficcao" style="background-image: url('livro1-lombada.png');" data-capa="livro1-capa.png" data-titulo="Livro do Desassossego" data-link="http://www.dominiopublico.gov.br/download/texto/vo000008.pdf"></div>
        <div id="livro2" class="livro romance" style="background-image: url('livro2-lombada.png');" data-capa="livro2-capa.png" data-titulo="Dom Casmurro" data-link="http://www.dominiopublico.gov.br/download/texto/bn000069.pdf"></div>
        <div id="livro3" class="livro terror" style="background-image: url('livro3-lombada.png');" data-capa="livro3-capa.png" data-titulo="Livro de Terror" data-link="#"></div>
        <div id="livro4" class="livro ficcao" style="background-image: url('livro4-lombada.png');" data-capa="livro4-capa.png" data-titulo="Ficção Científica" data-link="#"></div>
        <div id="livro5" class="livro romance" style="background-image: url('livro5-lombada.png');" data-capa="livro5-capa.png" data-titulo="Romance Clássico" data-link="#"></div>
    </div>
    <textarea id="inputLivro" placeholder="Digite document.getElementById('livroX') ou document.querySelectorAll('.categoria')\nDepois toggle('mostrar');"></textarea>
    <button onclick="executarComando()">Executar</button>
    
    <script>
        let livrosSelecionados = [];

        function executarComando() {
            const input = document.getElementById("inputLivro").value.split('\n');
            document.querySelectorAll('.livro').forEach(livro => livro.classList.remove('destaque'));            
            try {
                input.forEach(comando => {
                    if (comando.startsWith("document.getElementById")) {
                        let livro = eval(comando);
                        if (livro && livro.classList.contains("livro")) {
                            livro.classList.add("destaque");
                            livrosSelecionados.push(livro);
                        }
                    } else if (comando.startsWith("document.querySelectorAll")) {
                        let livros = eval(comando);
                        livros.forEach(livro => {
                            livro.classList.add("destaque");
                            livrosSelecionados.push(livro);
                        });
                    } else if (livrosSelecionados.length > 0 && comando.includes("toggle('mostrar')")) {
                        const preview = document.getElementById("preview");
                        const linkLivro = document.getElementById("linkLivro");
                        let primeiroLivro = livrosSelecionados[0];
                        preview.style.backgroundImage = `url(${primeiroLivro.dataset.capa})`;
                        preview.classList.toggle("mostrar");
                        linkLivro.href = primeiroLivro.dataset.link;
                        linkLivro.style.display = "block";
                    }
                });
            } catch (e) {
                alert("Comando inválido ou livro não encontrado!");
            }
        }
    </script>
</body>
</html>
